digraph G {
  rankdir = "RL";
  node [shape = rect, fontname = "sans-serif"];
  "data.terraform_remote_state.database" [label="data.terraform_remote_state.database"];
  "data.terraform_remote_state.network" [label="data.terraform_remote_state.network"];
  "data.terraform_remote_state.permissions" [label="data.terraform_remote_state.permissions"];
  "null_resource.build_ami" [label="null_resource.build_ami"];
  subgraph "cluster_module.alb" {
    label = "module.alb"
    fontname = "sans-serif"
    "module.alb.data.aws_acm_certificate.issued" [label="data.aws_acm_certificate.issued"];
    "module.alb.aws_lb.application_load_balancer" [label="aws_lb.application_load_balancer"];
    "module.alb.aws_lb.internal_application_load_balancer" [label="aws_lb.internal_application_load_balancer"];
    "module.alb.aws_lb_listener.alb_http_listener" [label="aws_lb_listener.alb_http_listener"];
    "module.alb.aws_lb_listener.http-redirect" [label="aws_lb_listener.http-redirect"];
    "module.alb.aws_lb_listener.internal_alb_http_listener" [label="aws_lb_listener.internal_alb_http_listener"];
    "module.alb.aws_lb_listener_rule.forward-custom-http-header" [label="aws_lb_listener_rule.forward-custom-http-header"];
    "module.alb.aws_lb_target_group.alb_target_group" [label="aws_lb_target_group.alb_target_group"];
    "module.alb.aws_lb_target_group.internal_alb_target_group" [label="aws_lb_target_group.internal_alb_target_group"];
  }
  subgraph "cluster_module.asg" {
    label = "module.asg"
    fontname = "sans-serif"
    "module.asg.data.local_file.backend_ami" [label="data.local_file.backend_ami"];
    "module.asg.data.local_file.frontend_ami" [label="data.local_file.frontend_ami"];
    "module.asg.aws_autoscaling_group.asg_name" [label="aws_autoscaling_group.asg_name"];
    "module.asg.aws_autoscaling_group.server_asg_name" [label="aws_autoscaling_group.server_asg_name"];
    "module.asg.aws_autoscaling_policy.scale_down" [label="aws_autoscaling_policy.scale_down"];
    "module.asg.aws_autoscaling_policy.scale_up" [label="aws_autoscaling_policy.scale_up"];
    "module.asg.aws_autoscaling_policy.server_scale_down" [label="aws_autoscaling_policy.server_scale_down"];
    "module.asg.aws_autoscaling_policy.server_scale_up" [label="aws_autoscaling_policy.server_scale_up"];
    "module.asg.aws_cloudwatch_metric_alarm.scale_down_alarm" [label="aws_cloudwatch_metric_alarm.scale_down_alarm"];
    "module.asg.aws_cloudwatch_metric_alarm.scale_up_alarm" [label="aws_cloudwatch_metric_alarm.scale_up_alarm"];
    "module.asg.aws_cloudwatch_metric_alarm.server_scale_down_alarm" [label="aws_cloudwatch_metric_alarm.server_scale_down_alarm"];
    "module.asg.aws_cloudwatch_metric_alarm.server_scale_up_alarm" [label="aws_cloudwatch_metric_alarm.server_scale_up_alarm"];
    "module.asg.aws_launch_template.lt_name" [label="aws_launch_template.lt_name"];
    "module.asg.aws_launch_template.server_lt_name" [label="aws_launch_template.server_lt_name"];
    "module.asg.aws_security_group.vpc_endpoint_sg" [label="aws_security_group.vpc_endpoint_sg"];
    "module.asg.aws_sns_topic.topic" [label="aws_sns_topic.topic"];
    "module.asg.aws_sns_topic_subscription.topic_email_subscription" [label="aws_sns_topic_subscription.topic_email_subscription"];
    "module.asg.aws_vpc_endpoint.logs" [label="aws_vpc_endpoint.logs"];
    "module.asg.aws_vpc_endpoint.s3_gateway_vpc_flow_logs" [label="aws_vpc_endpoint.s3_gateway_vpc_flow_logs"];
    "module.asg.aws_vpc_endpoint.ssm" [label="aws_vpc_endpoint.ssm"];
  }
  "null_resource.build_ami" -> "data.terraform_remote_state.database";
  "null_resource.build_ami" -> "data.terraform_remote_state.permissions";
  "null_resource.build_ami" -> "module.alb.aws_lb_listener.http-redirect";
  "null_resource.build_ami" -> "module.alb.aws_lb_listener.internal_alb_http_listener";
  "null_resource.build_ami" -> "module.alb.aws_lb_listener_rule.forward-custom-http-header";
  "module.alb.data.aws_acm_certificate.issued" -> "data.terraform_remote_state.network";
  "module.alb.aws_lb.application_load_balancer" -> "data.terraform_remote_state.network";
  "module.alb.aws_lb.internal_application_load_balancer" -> "data.terraform_remote_state.network";
  "module.alb.aws_lb_listener.alb_http_listener" -> "module.alb.data.aws_acm_certificate.issued";
  "module.alb.aws_lb_listener.alb_http_listener" -> "module.alb.aws_lb.application_load_balancer";
  "module.alb.aws_lb_listener.http-redirect" -> "module.alb.aws_lb.application_load_balancer";
  "module.alb.aws_lb_listener.internal_alb_http_listener" -> "module.alb.aws_lb.internal_application_load_balancer";
  "module.alb.aws_lb_listener.internal_alb_http_listener" -> "module.alb.aws_lb_target_group.internal_alb_target_group";
  "module.alb.aws_lb_listener_rule.forward-custom-http-header" -> "module.alb.aws_lb_listener.alb_http_listener";
  "module.alb.aws_lb_listener_rule.forward-custom-http-header" -> "module.alb.aws_lb_target_group.alb_target_group";
  "module.alb.aws_lb_target_group.alb_target_group" -> "data.terraform_remote_state.network";
  "module.alb.aws_lb_target_group.internal_alb_target_group" -> "data.terraform_remote_state.network";
  "module.asg.data.local_file.backend_ami" -> "null_resource.build_ami";
  "module.asg.data.local_file.frontend_ami" -> "null_resource.build_ami";
  "module.asg.aws_autoscaling_group.asg_name" -> "module.asg.aws_launch_template.lt_name";
  "module.asg.aws_autoscaling_group.server_asg_name" -> "module.asg.aws_launch_template.server_lt_name";
  "module.asg.aws_autoscaling_policy.scale_down" -> "module.asg.aws_autoscaling_group.asg_name";
  "module.asg.aws_autoscaling_policy.scale_up" -> "module.asg.aws_autoscaling_group.asg_name";
  "module.asg.aws_autoscaling_policy.server_scale_down" -> "module.asg.aws_autoscaling_group.server_asg_name";
  "module.asg.aws_autoscaling_policy.server_scale_up" -> "module.asg.aws_autoscaling_group.server_asg_name";
  "module.asg.aws_cloudwatch_metric_alarm.scale_down_alarm" -> "module.asg.aws_autoscaling_policy.scale_down";
  "module.asg.aws_cloudwatch_metric_alarm.scale_down_alarm" -> "module.asg.aws_sns_topic.topic";
  "module.asg.aws_cloudwatch_metric_alarm.scale_up_alarm" -> "module.asg.aws_autoscaling_policy.scale_up";
  "module.asg.aws_cloudwatch_metric_alarm.scale_up_alarm" -> "module.asg.aws_sns_topic.topic";
  "module.asg.aws_cloudwatch_metric_alarm.server_scale_down_alarm" -> "module.asg.aws_autoscaling_policy.server_scale_down";
  "module.asg.aws_cloudwatch_metric_alarm.server_scale_down_alarm" -> "module.asg.aws_sns_topic.topic";
  "module.asg.aws_cloudwatch_metric_alarm.server_scale_up_alarm" -> "module.asg.aws_autoscaling_policy.server_scale_up";
  "module.asg.aws_cloudwatch_metric_alarm.server_scale_up_alarm" -> "module.asg.aws_sns_topic.topic";
  "module.asg.aws_launch_template.lt_name" -> "module.asg.data.local_file.frontend_ami";
  "module.asg.aws_launch_template.server_lt_name" -> "module.asg.data.local_file.backend_ami";
  "module.asg.aws_security_group.vpc_endpoint_sg" -> "null_resource.build_ami";
  "module.asg.aws_sns_topic.topic" -> "null_resource.build_ami";
  "module.asg.aws_sns_topic_subscription.topic_email_subscription" -> "module.asg.aws_sns_topic.topic";
  "module.asg.aws_vpc_endpoint.logs" -> "module.asg.aws_security_group.vpc_endpoint_sg";
  "module.asg.aws_vpc_endpoint.s3_gateway_vpc_flow_logs" -> "null_resource.build_ami";
  "module.asg.aws_vpc_endpoint.ssm" -> "module.asg.aws_security_group.vpc_endpoint_sg";
}
