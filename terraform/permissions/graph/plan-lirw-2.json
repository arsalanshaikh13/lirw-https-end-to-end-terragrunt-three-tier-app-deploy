{"format_version":"1.2","terraform_version":"1.13.3","variables":{"terraform_state_bucket":{"value":"lirw-backend"}},"planned_values":{"outputs":{"certificate_arn":{"sensitive":false},"certificate_domain_name":{"sensitive":false,"type":"string","value":"devsandbox.space"},"certificate_status":{"sensitive":false},"client_key_name":{"sensitive":false,"type":"string","value":"client_key"},"s3_ssm_cw_instance_profile_name":{"sensitive":false,"type":"string","value":"S3-SSM-CW-Profile"},"s3_ssm_cw_role_name":{"sensitive":false,"type":"string","value":"S3-SSM-CW-Role"},"server_key_name":{"sensitive":false,"type":"string","value":"server_key"}},"root_module":{"child_modules":[{"resources":[{"address":"module.acm.aws_acm_certificate.cert","mode":"managed","type":"aws_acm_certificate","name":"cert","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"certificate_authority_arn":null,"certificate_body":null,"certificate_chain":null,"domain_name":"devsandbox.space","domain_validation_options":[{"domain_name":"api.devsandbox.space"},{"domain_name":"devsandbox.space"},{"domain_name":"www.devsandbox.space"}],"early_renewal_duration":null,"private_key":null,"subject_alternative_names":["api.devsandbox.space","devsandbox.space","www.devsandbox.space"],"tags":{"Environment":"test"},"tags_all":{"Environment":"test"},"validation_method":"DNS","validation_option":[]},"sensitive_values":{"domain_validation_options":[{},{},{}],"options":[],"private_key":true,"renewal_summary":[],"subject_alternative_names":[false,false,false],"tags":{},"tags_all":{},"validation_emails":[],"validation_option":[]}},{"address":"module.acm.aws_acm_certificate_validation.cert_validation","mode":"managed","type":"aws_acm_certificate_validation","name":"cert_validation","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"timeouts":{"create":"5m"}},"sensitive_values":{"timeouts":{},"validation_record_fqdns":[]}},{"address":"module.acm.aws_route53_record.cert_validation_record[\"api.devsandbox.space\"]","mode":"managed","type":"aws_route53_record","name":"cert_validation_record","index":"api.devsandbox.space","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"ttl":60,"weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}},{"address":"module.acm.aws_route53_record.cert_validation_record[\"devsandbox.space\"]","mode":"managed","type":"aws_route53_record","name":"cert_validation_record","index":"devsandbox.space","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"ttl":60,"weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}},{"address":"module.acm.aws_route53_record.cert_validation_record[\"www.devsandbox.space\"]","mode":"managed","type":"aws_route53_record","name":"cert_validation_record","index":"www.devsandbox.space","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"ttl":60,"weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}}],"address":"module.acm"},{"resources":[{"address":"module.iam_role.aws_flow_log.example_vpc_flow_log","mode":"managed","type":"aws_flow_log","name":"example_vpc_flow_log","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deliver_cross_account_role":null,"destination_options":[],"eni_id":null,"iam_role_arn":null,"log_destination_type":"s3","max_aggregation_interval":600,"subnet_id":null,"tags":null,"traffic_type":"ALL","transit_gateway_attachment_id":null,"transit_gateway_id":null,"vpc_id":"vpc-055738207ce5153df"},"sensitive_values":{"destination_options":[],"tags_all":{}}},{"address":"module.iam_role.aws_iam_instance_profile.s3_ssm_cw_profile","mode":"managed","type":"aws_iam_instance_profile","name":"s3_ssm_cw_profile","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"S3-SSM-CW-Profile","path":"/","role":"S3-SSM-CW-Role","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.iam_role.aws_iam_policy.cloudwatch_agent_policy","mode":"managed","type":"aws_iam_policy","name":"cloudwatch_agent_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Policy for EC2 instances to send logs to CloudWatch","name":"cloudwatch-agent-policy","path":"/","policy":"{\"Statement\":[{\"Action\":[\"logs:CreateLogStream\",\"logs:GetLogEvents\",\"logs:DeleteLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:log-group:*:log-stream:*\",\"Sid\":\"VisualEditor0\"},{\"Action\":[\"logs:ListTagsLogGroup\",\"logs:GetLogRecord\",\"logs:DeleteLogGroup\",\"logs:DescribeLogStreams\",\"logs:DescribeMetricFilters\",\"logs:GetLogGroupFields\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:log-group:*\",\"Sid\":\"VisualEditor1\"},{\"Action\":[\"logs:CreateLogDelivery\",\"logs:DescribeLogGroups\",\"logs:ListLogGroupsForQuery\",\"logs:GetLogDelivery\",\"logs:ListLogGroups\",\"logs:DescribeDestinations\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"VisualEditor2\"}],\"Version\":\"2012-10-17\"}","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.iam_role.aws_iam_role.s3_ssm_CW_role","mode":"managed","type":"aws_iam_role","name":"s3_ssm_CW_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"S3-SSM-CW-Role","path":"/","permissions_boundary":null,"tags":{"Name":"S3-SSM-Role","Purpose":"Allow EC2 to access S3 and use SSM agent"},"tags_all":{"Name":"S3-SSM-Role","Purpose":"Allow EC2 to access S3 and use SSM agent"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"role_last_used":[],"tags":{},"tags_all":{}}},{"address":"module.iam_role.aws_iam_role_policy_attachment.cloudwatch_agent_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"cloudwatch_agent_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"S3-SSM-CW-Role"},"sensitive_values":{}},{"address":"module.iam_role.aws_iam_role_policy_attachment.s3_readonly_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"s3_readonly_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess","role":"S3-SSM-CW-Role"},"sensitive_values":{}},{"address":"module.iam_role.aws_iam_role_policy_attachment.secret_manager-ReadWrite","mode":"managed","type":"aws_iam_role_policy_attachment","name":"secret_manager-ReadWrite","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/SecretsManagerReadWrite","role":"S3-SSM-CW-Role"},"sensitive_values":{}},{"address":"module.iam_role.aws_iam_role_policy_attachment.ssm_core_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm_core_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"S3-SSM-CW-Role"},"sensitive_values":{}},{"address":"module.iam_role.aws_iam_role_policy_attachment.ssmparameter_read_only","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssmparameter_read_only","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMReadOnlyAccess","role":"S3-SSM-CW-Role"},"sensitive_values":{}},{"address":"module.iam_role.aws_s3_bucket.vpc_flow_logs_bucket","mode":"managed","type":"aws_s3_bucket","name":"vpc_flow_logs_bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"vpc-flow-log-s3-bucket-lirw","force_destroy":true,"tags":null,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"module.iam_role.aws_s3_bucket_acl.acl","mode":"managed","type":"aws_s3_bucket_acl","name":"acl","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"private","expected_bucket_owner":null},"sensitive_values":{"access_control_policy":[]}},{"address":"module.iam_role.aws_s3_bucket_ownership_controls.vpc_flow_logs","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"vpc_flow_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"rule":[{"object_ownership":"BucketOwnerPreferred"}]},"sensitive_values":{"rule":[{}]}},{"address":"module.iam_role.aws_s3_bucket_policy.vpc_flow_logs","mode":"managed","type":"aws_s3_bucket_policy","name":"vpc_flow_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"vpc-flow-log-s3-bucket-lirw"},"sensitive_values":{}},{"address":"module.iam_role.aws_s3_bucket_public_access_block.vpc_flow_logs","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"vpc_flow_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"vpc-flow-log-s3-bucket-lirw","ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"module.iam_role.aws_s3_bucket_server_side_encryption_configuration.SSE_config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"SSE_config","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}],"address":"module.iam_role"},{"resources":[{"address":"module.key.aws_key_pair.client_key","mode":"managed","type":"aws_key_pair","name":"client_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"key_name":"client_key","public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCjp8gx9zt/XF2j+3u7D5hsH5SpcghNhm5icRmQ6iNthYI8UDynnsBdNYQnJmIq1cUahRH19JU8zJtLiCLraK7lEcKFXISDekQkDFu5tnVizRHWKvUTZqkT8cfWJBIlwiP7CKcX+0sK3AX4LJfyK4SfToUVLJ747XsUKftL2EBmu1R7yDUEcdHqTev+rcCaTzPyCuTk+sHMLiWIdv7HGNDNfCptcXN+3P2s+OZieA0sk71mQNj+/Us0hqDH/B3qpCsdzCQSwmtcW5ic/Ys7oClggjcrSrnkbFaVTBG3Qb8CdckT/iaLehUhWdhtO1J1Za3j4v54FkBCy57gzcp16VLPyaadANs6N6IvqfMubfXGZvSnp7ZsF0zmBvDbUDOr/gwb7QuWh4AR0gqp3iuOsJfwGMDOWm0eKVvI/hLU2VliwBPwvRL1iaxIgqdFGhZbNxPQvetrWdnHpQ1Hkq2+Vn1PI7cAYk5wq4HPUw5MMZRB/3EZBusfi3zvs3HJJ2lOPhTUwsK/Ld9N934TzUQJMQ86W39SCPo/6lcU25fVJElqm9eRJ4zs7p58erR/1tk3g8TASPHGzixfzBKJE36mfRVDRSsN5eC7wi2+d01vinzPPFurphAqb//VH4r8B8j2VfQhzcuP07izGfq9x1UW4zFAYvAaT++mZAgEgzPjCtOPPw== DELL@DESKTOP-AG365S6","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.key.aws_key_pair.nat-bastion","mode":"managed","type":"aws_key_pair","name":"nat-bastion","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"key_name":"nat-bastion-key","public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCriS2xAhnC412A5nYeganmLS7zByEQ1rFKq58ZDctpDeHeDtSiNKQsv+HfshnxP+McaA/rlNBGCKqOMsWG463kRSYVeYxVzhAvGnTSIiZyE86n4NmLQ00/PI7icUk5H7DX5weyf0Fsys3oDixPCnf3fpOLGNVIwvtLNr97eamFd79VmNX/fvGtdappFlWTSFXgIgaJVR6rs5bKz7BS4U6HzaH9CDoFLaVxPDWmhcXHs+aJD572mzwJv3vsArOhJLXfqlPiuJ3fulZ1opQGj8vl/V1oPTNNVD5spPiilDdZVWJobERPwUo46DInaaT7+qVZ8LtduFmoTQuqHFPKoCZRW1KLy8Uz/Z+wtumITnMlHNS65sOEy3af1V2ECQwESc8YcLH0sn6fWBgJbjF+lInzdpwPqeekqV6XweR05o8nK4Sq++z+k4UAlGMvrKjh/dxLvwZMaphrrRZ3xAY8kkeChCFuGLvbyfdncJbdmscgzrQz2FgGCXS8quCgYgMfm34BSGNAXsi8Ylb2clCxDMI0u0NLcR7EAV4bdqr8YHsoa4p9EiUt+IgvF6H4svnuykUpkODjvJ8Ne789iaRMUUPk4w/K2iP1Czg8Zw2XiUkny9qwxBN272mcD+3yUJf2tP63hXA4nKbRS8Vsr/aJX8Edv6SyGi+zTBe+iCEoecs/wQ== DELL@DESKTOP-AG365S6","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.key.aws_key_pair.server_key","mode":"managed","type":"aws_key_pair","name":"server_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"key_name":"server_key","public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDPMNBdyiO0NVbKfIQ8fhi+kd+OCnp9RblxIAW5zs76IHQKwCdyoNO+ChUXc1NhcuAG713jGa5fV/Nt/sTAnvpUuvHxRWbrLkzsorwGmBBJ+PKviUH+SQ5zQQyAoCFe/DS4mNgJfc3pNTXymMEjDiOwhldzZhcOStTIFCN1yDkL2aTeiIaThyPvYj6/uORn2wpOyx35ZhPpUjpxsJWnOJGYcw1nDful+FR/NCd6TUQYz774iTXiOh6nmBwpJXkcWkpHxfC2mroZ9BjHuCPDIT/OB8Xi6Ke4Ojt+Nf33PTYUccIY1WF3cUO5zV7RrlZiRmyI5ZeAMlwN8k7Cs0wS0usv9hUR6MSuXaNUzFREuh4UmO8CpQ2VTKAdb4WnuNmcZuEIeaX4Wl35pLjDOK2dnS/51i0V/MgBBEjetRK2e54Je+h4cqVv1gId/Nh/pfaYIfRZiPag41jcPqvt+UALccaW+STKDSqusUIQz4eT40hsz/GE+NDFPEOWKVNA+5hRwp95tGXRYEQsY1KkCGm4giK0PMF12IbW1IQfG0LFdKsaIkQnglZyxdzT0zNnoWeCyvFKNo2XcUVZ2199Sz8hyt5SGjfEkHBJqggmRRSkPm3Bpm/cCUgzhq5TKbTFIz5RyA3gWoVt4n9/FFB7JwcDjahwF3LFHrMBh/tZ/AF3RZa4GQ== DELL@DESKTOP-AG365S6","tags":null},"sensitive_values":{"tags_all":{}}}],"address":"module.key"}]}},"resource_changes":[{"address":"module.acm.aws_acm_certificate.cert","module_address":"module.acm","mode":"managed","type":"aws_acm_certificate","name":"cert","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"certificate_authority_arn":null,"certificate_body":null,"certificate_chain":null,"domain_name":"devsandbox.space","domain_validation_options":[{"domain_name":"api.devsandbox.space"},{"domain_name":"devsandbox.space"},{"domain_name":"www.devsandbox.space"}],"early_renewal_duration":null,"private_key":null,"subject_alternative_names":["api.devsandbox.space","devsandbox.space","www.devsandbox.space"],"tags":{"Environment":"test"},"tags_all":{"Environment":"test"},"validation_method":"DNS","validation_option":[]},"after_unknown":{"arn":true,"domain_validation_options":[{"resource_record_name":true,"resource_record_type":true,"resource_record_value":true},{"resource_record_name":true,"resource_record_type":true,"resource_record_value":true},{"resource_record_name":true,"resource_record_type":true,"resource_record_value":true}],"id":true,"key_algorithm":true,"not_after":true,"not_before":true,"options":true,"pending_renewal":true,"renewal_eligibility":true,"renewal_summary":true,"status":true,"subject_alternative_names":[false,false,false],"tags":{},"tags_all":{},"type":true,"validation_emails":true,"validation_option":[]},"before_sensitive":false,"after_sensitive":{"domain_validation_options":[{},{},{}],"options":[],"private_key":true,"renewal_summary":[],"subject_alternative_names":[false,false,false],"tags":{},"tags_all":{},"validation_emails":[],"validation_option":[]}}},{"address":"module.acm.aws_acm_certificate_validation.cert_validation","module_address":"module.acm","mode":"managed","type":"aws_acm_certificate_validation","name":"cert_validation","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"timeouts":{"create":"5m"}},"after_unknown":{"certificate_arn":true,"id":true,"timeouts":{},"validation_record_fqdns":true},"before_sensitive":false,"after_sensitive":{"timeouts":{},"validation_record_fqdns":[]}}},{"address":"module.acm.aws_route53_record.cert_validation_record[\"api.devsandbox.space\"]","module_address":"module.acm","mode":"managed","type":"aws_route53_record","name":"cert_validation_record","index":"api.devsandbox.space","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"ttl":60,"weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"after_unknown":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"id":true,"latency_routing_policy":[],"name":true,"records":true,"type":true,"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}}},{"address":"module.acm.aws_route53_record.cert_validation_record[\"devsandbox.space\"]","module_address":"module.acm","mode":"managed","type":"aws_route53_record","name":"cert_validation_record","index":"devsandbox.space","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"ttl":60,"weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"after_unknown":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"id":true,"latency_routing_policy":[],"name":true,"records":true,"type":true,"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}}},{"address":"module.acm.aws_route53_record.cert_validation_record[\"www.devsandbox.space\"]","module_address":"module.acm","mode":"managed","type":"aws_route53_record","name":"cert_validation_record","index":"www.devsandbox.space","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"ttl":60,"weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"after_unknown":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"id":true,"latency_routing_policy":[],"name":true,"records":true,"type":true,"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}}},{"address":"module.iam_role.aws_flow_log.example_vpc_flow_log","module_address":"module.iam_role","mode":"managed","type":"aws_flow_log","name":"example_vpc_flow_log","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deliver_cross_account_role":null,"destination_options":[],"eni_id":null,"iam_role_arn":null,"log_destination_type":"s3","max_aggregation_interval":600,"subnet_id":null,"tags":null,"traffic_type":"ALL","transit_gateway_attachment_id":null,"transit_gateway_id":null,"vpc_id":"vpc-055738207ce5153df"},"after_unknown":{"arn":true,"destination_options":[],"id":true,"log_destination":true,"log_format":true,"log_group_name":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"destination_options":[],"tags_all":{}}}},{"address":"module.iam_role.aws_iam_instance_profile.s3_ssm_cw_profile","module_address":"module.iam_role","mode":"managed","type":"aws_iam_instance_profile","name":"s3_ssm_cw_profile","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"S3-SSM-CW-Profile","path":"/","role":"S3-SSM-CW-Role","tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.iam_role.aws_iam_policy.cloudwatch_agent_policy","module_address":"module.iam_role","mode":"managed","type":"aws_iam_policy","name":"cloudwatch_agent_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Policy for EC2 instances to send logs to CloudWatch","name":"cloudwatch-agent-policy","path":"/","policy":"{\"Statement\":[{\"Action\":[\"logs:CreateLogStream\",\"logs:GetLogEvents\",\"logs:DeleteLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:log-group:*:log-stream:*\",\"Sid\":\"VisualEditor0\"},{\"Action\":[\"logs:ListTagsLogGroup\",\"logs:GetLogRecord\",\"logs:DeleteLogGroup\",\"logs:DescribeLogStreams\",\"logs:DescribeMetricFilters\",\"logs:GetLogGroupFields\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:log-group:*\",\"Sid\":\"VisualEditor1\"},{\"Action\":[\"logs:CreateLogDelivery\",\"logs:DescribeLogGroups\",\"logs:ListLogGroupsForQuery\",\"logs:GetLogDelivery\",\"logs:ListLogGroups\",\"logs:DescribeDestinations\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"VisualEditor2\"}],\"Version\":\"2012-10-17\"}","tags":null},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.iam_role.aws_iam_role.s3_ssm_CW_role","module_address":"module.iam_role","mode":"managed","type":"aws_iam_role","name":"s3_ssm_CW_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"S3-SSM-CW-Role","path":"/","permissions_boundary":null,"tags":{"Name":"S3-SSM-Role","Purpose":"Allow EC2 to access S3 and use SSM agent"},"tags_all":{"Name":"S3-SSM-Role","Purpose":"Allow EC2 to access S3 and use SSM agent"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"role_last_used":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"role_last_used":[],"tags":{},"tags_all":{}}}},{"address":"module.iam_role.aws_iam_role_policy_attachment.cloudwatch_agent_attachment","module_address":"module.iam_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"cloudwatch_agent_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"S3-SSM-CW-Role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam_role.aws_iam_role_policy_attachment.s3_readonly_attach","module_address":"module.iam_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"s3_readonly_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess","role":"S3-SSM-CW-Role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam_role.aws_iam_role_policy_attachment.secret_manager-ReadWrite","module_address":"module.iam_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"secret_manager-ReadWrite","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/SecretsManagerReadWrite","role":"S3-SSM-CW-Role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam_role.aws_iam_role_policy_attachment.ssm_core_attach","module_address":"module.iam_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm_core_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"S3-SSM-CW-Role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam_role.aws_iam_role_policy_attachment.ssmparameter_read_only","module_address":"module.iam_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssmparameter_read_only","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMReadOnlyAccess","role":"S3-SSM-CW-Role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam_role.aws_s3_bucket.vpc_flow_logs_bucket","module_address":"module.iam_role","mode":"managed","type":"aws_s3_bucket","name":"vpc_flow_logs_bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"vpc-flow-log-s3-bucket-lirw","force_destroy":true,"tags":null,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.iam_role.aws_s3_bucket_acl.acl","module_address":"module.iam_role","mode":"managed","type":"aws_s3_bucket_acl","name":"acl","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","expected_bucket_owner":null},"after_unknown":{"access_control_policy":true,"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{"access_control_policy":[]}}},{"address":"module.iam_role.aws_s3_bucket_ownership_controls.vpc_flow_logs","module_address":"module.iam_role","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"vpc_flow_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"rule":[{"object_ownership":"BucketOwnerPreferred"}]},"after_unknown":{"bucket":true,"id":true,"rule":[{}]},"before_sensitive":false,"after_sensitive":{"rule":[{}]}}},{"address":"module.iam_role.aws_s3_bucket_policy.vpc_flow_logs","module_address":"module.iam_role","mode":"managed","type":"aws_s3_bucket_policy","name":"vpc_flow_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"vpc-flow-log-s3-bucket-lirw"},"after_unknown":{"id":true,"policy":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam_role.aws_s3_bucket_public_access_block.vpc_flow_logs","module_address":"module.iam_role","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"vpc_flow_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"bucket":"vpc-flow-log-s3-bucket-lirw","ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam_role.aws_s3_bucket_server_side_encryption_configuration.SSE_config","module_address":"module.iam_role","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"SSE_config","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"module.key.aws_key_pair.client_key","module_address":"module.key","mode":"managed","type":"aws_key_pair","name":"client_key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"key_name":"client_key","public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCjp8gx9zt/XF2j+3u7D5hsH5SpcghNhm5icRmQ6iNthYI8UDynnsBdNYQnJmIq1cUahRH19JU8zJtLiCLraK7lEcKFXISDekQkDFu5tnVizRHWKvUTZqkT8cfWJBIlwiP7CKcX+0sK3AX4LJfyK4SfToUVLJ747XsUKftL2EBmu1R7yDUEcdHqTev+rcCaTzPyCuTk+sHMLiWIdv7HGNDNfCptcXN+3P2s+OZieA0sk71mQNj+/Us0hqDH/B3qpCsdzCQSwmtcW5ic/Ys7oClggjcrSrnkbFaVTBG3Qb8CdckT/iaLehUhWdhtO1J1Za3j4v54FkBCy57gzcp16VLPyaadANs6N6IvqfMubfXGZvSnp7ZsF0zmBvDbUDOr/gwb7QuWh4AR0gqp3iuOsJfwGMDOWm0eKVvI/hLU2VliwBPwvRL1iaxIgqdFGhZbNxPQvetrWdnHpQ1Hkq2+Vn1PI7cAYk5wq4HPUw5MMZRB/3EZBusfi3zvs3HJJ2lOPhTUwsK/Ld9N934TzUQJMQ86W39SCPo/6lcU25fVJElqm9eRJ4zs7p58erR/1tk3g8TASPHGzixfzBKJE36mfRVDRSsN5eC7wi2+d01vinzPPFurphAqb//VH4r8B8j2VfQhzcuP07izGfq9x1UW4zFAYvAaT++mZAgEgzPjCtOPPw== DELL@DESKTOP-AG365S6","tags":null},"after_unknown":{"arn":true,"fingerprint":true,"id":true,"key_name_prefix":true,"key_pair_id":true,"key_type":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.key.aws_key_pair.nat-bastion","module_address":"module.key","mode":"managed","type":"aws_key_pair","name":"nat-bastion","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"key_name":"nat-bastion-key","public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCriS2xAhnC412A5nYeganmLS7zByEQ1rFKq58ZDctpDeHeDtSiNKQsv+HfshnxP+McaA/rlNBGCKqOMsWG463kRSYVeYxVzhAvGnTSIiZyE86n4NmLQ00/PI7icUk5H7DX5weyf0Fsys3oDixPCnf3fpOLGNVIwvtLNr97eamFd79VmNX/fvGtdappFlWTSFXgIgaJVR6rs5bKz7BS4U6HzaH9CDoFLaVxPDWmhcXHs+aJD572mzwJv3vsArOhJLXfqlPiuJ3fulZ1opQGj8vl/V1oPTNNVD5spPiilDdZVWJobERPwUo46DInaaT7+qVZ8LtduFmoTQuqHFPKoCZRW1KLy8Uz/Z+wtumITnMlHNS65sOEy3af1V2ECQwESc8YcLH0sn6fWBgJbjF+lInzdpwPqeekqV6XweR05o8nK4Sq++z+k4UAlGMvrKjh/dxLvwZMaphrrRZ3xAY8kkeChCFuGLvbyfdncJbdmscgzrQz2FgGCXS8quCgYgMfm34BSGNAXsi8Ylb2clCxDMI0u0NLcR7EAV4bdqr8YHsoa4p9EiUt+IgvF6H4svnuykUpkODjvJ8Ne789iaRMUUPk4w/K2iP1Czg8Zw2XiUkny9qwxBN272mcD+3yUJf2tP63hXA4nKbRS8Vsr/aJX8Edv6SyGi+zTBe+iCEoecs/wQ== DELL@DESKTOP-AG365S6","tags":null},"after_unknown":{"arn":true,"fingerprint":true,"id":true,"key_name_prefix":true,"key_pair_id":true,"key_type":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.key.aws_key_pair.server_key","module_address":"module.key","mode":"managed","type":"aws_key_pair","name":"server_key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"key_name":"server_key","public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDPMNBdyiO0NVbKfIQ8fhi+kd+OCnp9RblxIAW5zs76IHQKwCdyoNO+ChUXc1NhcuAG713jGa5fV/Nt/sTAnvpUuvHxRWbrLkzsorwGmBBJ+PKviUH+SQ5zQQyAoCFe/DS4mNgJfc3pNTXymMEjDiOwhldzZhcOStTIFCN1yDkL2aTeiIaThyPvYj6/uORn2wpOyx35ZhPpUjpxsJWnOJGYcw1nDful+FR/NCd6TUQYz774iTXiOh6nmBwpJXkcWkpHxfC2mroZ9BjHuCPDIT/OB8Xi6Ke4Ojt+Nf33PTYUccIY1WF3cUO5zV7RrlZiRmyI5ZeAMlwN8k7Cs0wS0usv9hUR6MSuXaNUzFREuh4UmO8CpQ2VTKAdb4WnuNmcZuEIeaX4Wl35pLjDOK2dnS/51i0V/MgBBEjetRK2e54Je+h4cqVv1gId/Nh/pfaYIfRZiPag41jcPqvt+UALccaW+STKDSqusUIQz4eT40hsz/GE+NDFPEOWKVNA+5hRwp95tGXRYEQsY1KkCGm4giK0PMF12IbW1IQfG0LFdKsaIkQnglZyxdzT0zNnoWeCyvFKNo2XcUVZ2199Sz8hyt5SGjfEkHBJqggmRRSkPm3Bpm/cCUgzhq5TKbTFIz5RyA3gWoVt4n9/FFB7JwcDjahwF3LFHrMBh/tZ/AF3RZa4GQ== DELL@DESKTOP-AG365S6","tags":null},"after_unknown":{"arn":true,"fingerprint":true,"id":true,"key_name_prefix":true,"key_pair_id":true,"key_type":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}}],"output_changes":{"certificate_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"certificate_domain_name":{"actions":["create"],"before":null,"after":"devsandbox.space","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"certificate_status":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"client_key_name":{"actions":["create"],"before":null,"after":"client_key","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"s3_ssm_cw_instance_profile_name":{"actions":["create"],"before":null,"after":"S3-SSM-CW-Profile","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"s3_ssm_cw_role_name":{"actions":["create"],"before":null,"after":"S3-SSM-CW-Role","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"server_key_name":{"actions":["create"],"before":null,"after":"server_key","after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.3","values":{"outputs":{"certificate_domain_name":{"sensitive":false,"value":"devsandbox.space","type":"string"},"client_key_name":{"sensitive":false,"value":"client_key","type":"string"},"s3_ssm_cw_instance_profile_name":{"sensitive":false,"value":"S3-SSM-CW-Profile","type":"string"},"s3_ssm_cw_role_name":{"sensitive":false,"value":"S3-SSM-CW-Role","type":"string"},"server_key_name":{"sensitive":false,"value":"server_key","type":"string"}},"root_module":{"resources":[{"address":"data.terraform_remote_state.network","mode":"data","type":"terraform_remote_state","name":"network","provider_name":"terraform.io/builtin/terraform","schema_version":0,"values":{"backend":"s3","config":{"bucket":"lirw-backend","key":"network/lirw-app.tfstate","region":"us-east-1"},"defaults":null,"outputs":{"alb_sg_id":"sg-0a415b954bb563a5d","client_sg_id":"sg-0b1c69ba52497f36d","db_sg_id":"sg-07c592db207cbe50a","igw_id":{"arn":"arn:aws:ec2:us-east-1:513410254332:internet-gateway/igw-0ffd8ce3ceb608414","id":"igw-0ffd8ce3ceb608414","owner_id":"513410254332","tags":{"Name":"lirw-three-tier-app-igw"},"tags_all":{"Name":"lirw-three-tier-app-igw"},"timeouts":null,"vpc_id":"vpc-055738207ce5153df"},"internal_alb_sg_id":"sg-0536fa87e6bb981e2","lirw_bucket_name":"lirw-app-bucket","pri_rt_a_id":"rtb-06f1a6be06a419cac","pri_rt_b_id":"rtb-01ef2b0b1fada5581","pri_sub_3a_id":"subnet-0dec5c13c98f08789","pri_sub_4b_id":"subnet-06f22a4b68497468a","pri_sub_5a_id":"subnet-033491d7f6ae733f5","pri_sub_6b_id":"subnet-087ecc242516a4e3f","pri_sub_7a_id":"subnet-0a05d515b4a5163f6","pri_sub_8b_id":"subnet-078f3a85b13172ab9","project_name":"lirw-three-tier-app","pub_sub_1a_id":"subnet-0dc6995c7787f1d58","pub_sub_2b_id":"subnet-01b89a75f0dcbf04e","region":"us-east-1","server_sg_id":"sg-07969f0fd2896112e","vpc_cidr_block":"10.0.0.0/16","vpc_id":"vpc-055738207ce5153df"},"workspace":null},"sensitive_values":{"config":{},"outputs":{"igw_id":{"tags":{},"tags_all":{}}}}}],"child_modules":[{"resources":[{"address":"module.acm.data.aws_route53_zone.public-zone","mode":"data","type":"aws_route53_zone","name":"public-zone","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:route53:::hostedzone/Z01883253QKY9CDJWMTTM","caller_reference":"62abbaba-598c-448a-9a31-e7b267070082","comment":"development sandbox domain from me","id":"Z01883253QKY9CDJWMTTM","linked_service_description":null,"linked_service_principal":null,"name":"devsandbox.space","name_servers":["ns-49.awsdns-06.com","ns-1775.awsdns-29.co.uk","ns-1305.awsdns-35.org","ns-976.awsdns-58.net"],"primary_name_server":"ns-49.awsdns-06.com","private_zone":false,"resource_record_set_count":2,"tags":{"Name":"dev-sandbox"},"vpc_id":null,"zone_id":"Z01883253QKY9CDJWMTTM"},"sensitive_values":{"name_servers":[false,false,false,false],"tags":{}}}],"address":"module.acm"},{"resources":[{"address":"module.iam_role.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"513410254332","arn":"arn:aws:iam::513410254332:user/Arsalan13IAM","id":"513410254332","user_id":"AIDAXPCNCYX6MQQRXCZTT"},"sensitive_values":{}}],"address":"module.iam_role"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"4.67.0","expressions":{"region":{"references":["data.terraform_remote_state.network.outputs.region","data.terraform_remote_state.network.outputs","data.terraform_remote_state.network"]}}},"terraform":{"name":"terraform","full_name":"terraform.io/builtin/terraform"}},"root_module":{"outputs":{"certificate_arn":{"expression":{"references":["module.acm.certificate_arn","module.acm"]},"description":"ACM Certificate ARN"},"certificate_domain_name":{"expression":{"references":["module.acm.certificate_domain_name","module.acm"]},"description":"ACM Certificate Domain Name"},"certificate_status":{"expression":{"references":["module.acm.certificate_status","module.acm"]},"description":"ACM Certificate Status"},"client_key_name":{"expression":{"references":["module.key.client_key_name","module.key"]}},"s3_ssm_cw_instance_profile_name":{"expression":{"references":["module.iam_role.s3_ssm_cw_instance_profile_name","module.iam_role"]},"description":"IAM role name for S3 and SSM access"},"s3_ssm_cw_role_name":{"expression":{"references":["module.iam_role.s3_ssm_cw_role_name","module.iam_role"]},"description":"IAM role name for S3 and SSM access"},"server_key_name":{"expression":{"references":["module.key.server_key_name","module.key"]}}},"resources":[{"address":"data.terraform_remote_state.network","mode":"data","type":"terraform_remote_state","name":"network","provider_config_key":"terraform","expressions":{"backend":{"constant_value":"s3"},"config":{"references":["var.terraform_state_bucket"]}},"schema_version":0}],"module_calls":{"acm":{"source":"./modules/acm","module":{"outputs":{"certificate_arn":{"expression":{"references":["aws_acm_certificate.cert.arn","aws_acm_certificate.cert"]},"description":"ACM Certificate ARN"},"certificate_domain_name":{"expression":{"references":["aws_acm_certificate.cert.domain_name","aws_acm_certificate.cert"]},"description":"ACM Certificate Domain Name"},"certificate_status":{"expression":{"references":["aws_acm_certificate.cert.status","aws_acm_certificate.cert"]},"description":"ACM Certificate Status"}},"resources":[{"address":"aws_acm_certificate.cert","mode":"managed","type":"aws_acm_certificate","name":"cert","provider_config_key":"aws","expressions":{"domain_name":{"references":["var.hosted_zone_name"]},"subject_alternative_names":{"references":["var.hosted_zone_name","var.hosted_zone_name"]},"tags":{"constant_value":{"Environment":"test"}},"validation_method":{"constant_value":"DNS"}},"schema_version":0},{"address":"aws_acm_certificate_validation.cert_validation","mode":"managed","type":"aws_acm_certificate_validation","name":"cert_validation","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["aws_acm_certificate.cert.arn","aws_acm_certificate.cert"]},"timeouts":{"create":{"constant_value":"5m"}},"validation_record_fqdns":{"references":["aws_route53_record.cert_validation_record"]}},"schema_version":0},{"address":"aws_route53_record.cert_validation_record","mode":"managed","type":"aws_route53_record","name":"cert_validation_record","provider_config_key":"aws","expressions":{"allow_overwrite":{"constant_value":true},"name":{"references":["each.value.name","each.value"]},"records":{"references":["each.value.record","each.value"]},"ttl":{"constant_value":60},"type":{"references":["each.value.type","each.value"]},"zone_id":{"references":["data.aws_route53_zone.public-zone.zone_id","data.aws_route53_zone.public-zone"]}},"schema_version":2,"for_each_expression":{"references":["aws_acm_certificate.cert.domain_validation_options","aws_acm_certificate.cert"]}},{"address":"data.aws_route53_zone.public-zone","mode":"data","type":"aws_route53_zone","name":"public-zone","provider_config_key":"aws","expressions":{"name":{"references":["var.hosted_zone_name"]},"private_zone":{"constant_value":false}},"schema_version":0}],"variables":{"hosted_zone_name":{"default":"devsandbox.space"}}}},"iam_role":{"source":"./modules/iam_role","expressions":{"region":{"references":["data.terraform_remote_state.network.outputs.region","data.terraform_remote_state.network.outputs","data.terraform_remote_state.network"]},"vpc_id":{"references":["data.terraform_remote_state.network.outputs.vpc_id","data.terraform_remote_state.network.outputs","data.terraform_remote_state.network"]}},"module":{"outputs":{"s3_ssm_cw_instance_profile_name":{"expression":{"references":["aws_iam_instance_profile.s3_ssm_cw_profile.name","aws_iam_instance_profile.s3_ssm_cw_profile"]},"description":"IAM role name for S3 and SSM access"},"s3_ssm_cw_role_name":{"expression":{"references":["aws_iam_role.s3_ssm_CW_role.name","aws_iam_role.s3_ssm_CW_role"]},"description":"IAM role name for S3 and SSM access"}},"resources":[{"address":"aws_flow_log.example_vpc_flow_log","mode":"managed","type":"aws_flow_log","name":"example_vpc_flow_log","provider_config_key":"aws","expressions":{"log_destination":{"references":["aws_s3_bucket.vpc_flow_logs_bucket.arn","aws_s3_bucket.vpc_flow_logs_bucket"]},"log_destination_type":{"constant_value":"s3"},"traffic_type":{"constant_value":"ALL"},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"aws_iam_instance_profile.s3_ssm_cw_profile","mode":"managed","type":"aws_iam_instance_profile","name":"s3_ssm_cw_profile","provider_config_key":"aws","expressions":{"name":{"constant_value":"S3-SSM-CW-Profile"},"role":{"references":["aws_iam_role.s3_ssm_CW_role.name","aws_iam_role.s3_ssm_CW_role"]}},"schema_version":0},{"address":"aws_iam_policy.cloudwatch_agent_policy","mode":"managed","type":"aws_iam_policy","name":"cloudwatch_agent_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Policy for EC2 instances to send logs to CloudWatch"},"name":{"constant_value":"cloudwatch-agent-policy"},"policy":{}},"schema_version":0},{"address":"aws_iam_role.s3_ssm_CW_role","mode":"managed","type":"aws_iam_role","name":"s3_ssm_CW_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"S3-SSM-CW-Role"},"tags":{"constant_value":{"Name":"S3-SSM-Role","Purpose":"Allow EC2 to access S3 and use SSM agent"}}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.cloudwatch_agent_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"cloudwatch_agent_attachment","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.cloudwatch_agent_policy.arn","aws_iam_policy.cloudwatch_agent_policy"]},"role":{"references":["aws_iam_role.s3_ssm_CW_role.name","aws_iam_role.s3_ssm_CW_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.s3_readonly_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"s3_readonly_attach","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess"},"role":{"references":["aws_iam_role.s3_ssm_CW_role.name","aws_iam_role.s3_ssm_CW_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.secret_manager-ReadWrite","mode":"managed","type":"aws_iam_role_policy_attachment","name":"secret_manager-ReadWrite","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/SecretsManagerReadWrite"},"role":{"references":["aws_iam_role.s3_ssm_CW_role.name","aws_iam_role.s3_ssm_CW_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ssm_core_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm_core_attach","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"role":{"references":["aws_iam_role.s3_ssm_CW_role.name","aws_iam_role.s3_ssm_CW_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ssmparameter_read_only","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssmparameter_read_only","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonSSMReadOnlyAccess"},"role":{"references":["aws_iam_role.s3_ssm_CW_role.name","aws_iam_role.s3_ssm_CW_role"]}},"schema_version":0},{"address":"aws_s3_bucket.vpc_flow_logs_bucket","mode":"managed","type":"aws_s3_bucket","name":"vpc_flow_logs_bucket","provider_config_key":"aws","expressions":{"bucket":{"constant_value":"vpc-flow-log-s3-bucket-lirw"},"force_destroy":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_acl.acl","mode":"managed","type":"aws_s3_bucket_acl","name":"acl","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["aws_s3_bucket.vpc_flow_logs_bucket.id","aws_s3_bucket.vpc_flow_logs_bucket"]}},"schema_version":0,"depends_on":["aws_s3_bucket_ownership_controls.vpc_flow_logs"]},{"address":"aws_s3_bucket_ownership_controls.vpc_flow_logs","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"vpc_flow_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.vpc_flow_logs_bucket.id","aws_s3_bucket.vpc_flow_logs_bucket"]},"rule":[{"object_ownership":{"constant_value":"BucketOwnerPreferred"}}]},"schema_version":0},{"address":"aws_s3_bucket_policy.vpc_flow_logs","mode":"managed","type":"aws_s3_bucket_policy","name":"vpc_flow_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.vpc_flow_logs_bucket.bucket","aws_s3_bucket.vpc_flow_logs_bucket"]},"policy":{"references":["aws_s3_bucket.vpc_flow_logs_bucket.arn","aws_s3_bucket.vpc_flow_logs_bucket","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","aws_s3_bucket.vpc_flow_logs_bucket.arn","aws_s3_bucket.vpc_flow_logs_bucket","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.vpc_flow_logs","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"vpc_flow_logs","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.vpc_flow_logs_bucket.bucket","aws_s3_bucket.vpc_flow_logs_bucket"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.SSE_config","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"SSE_config","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.vpc_flow_logs_bucket.id","aws_s3_bucket.vpc_flow_logs_bucket"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}],"bucket_key_enabled":{"constant_value":false}}]},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"region":{},"vpc_id":{}}}},"key":{"source":"./modules/key","module":{"outputs":{"client_key_name":{"expression":{"references":["aws_key_pair.client_key.key_name","aws_key_pair.client_key"]}},"nat_bastion_key_name":{"expression":{"references":["aws_key_pair.nat-bastion.key_name","aws_key_pair.nat-bastion"]}},"server_key_name":{"expression":{"references":["aws_key_pair.server_key.key_name","aws_key_pair.server_key"]}}},"resources":[{"address":"aws_key_pair.client_key","mode":"managed","type":"aws_key_pair","name":"client_key","provider_config_key":"aws","expressions":{"key_name":{"constant_value":"client_key"},"public_key":{}},"schema_version":1},{"address":"aws_key_pair.nat-bastion","mode":"managed","type":"aws_key_pair","name":"nat-bastion","provider_config_key":"aws","expressions":{"key_name":{"constant_value":"nat-bastion-key"},"public_key":{}},"schema_version":1},{"address":"aws_key_pair.server_key","mode":"managed","type":"aws_key_pair","name":"server_key","provider_config_key":"aws","expressions":{"key_name":{"constant_value":"server_key"},"public_key":{}},"schema_version":1}]}}},"variables":{"terraform_state_bucket":{}}}},"relevant_attributes":[{"resource":"module.iam_role.aws_iam_policy.cloudwatch_agent_policy","attribute":["arn"]},{"resource":"module.acm.data.aws_route53_zone.public-zone","attribute":["zone_id"]},{"resource":"module.iam_role.data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"module.iam_role.aws_iam_instance_profile.s3_ssm_cw_profile","attribute":["name"]},{"resource":"module.iam_role.aws_s3_bucket.vpc_flow_logs_bucket","attribute":["arn"]},{"resource":"module.iam_role.aws_s3_bucket.vpc_flow_logs_bucket","attribute":["bucket"]},{"resource":"module.acm.aws_acm_certificate.cert","attribute":["arn"]},{"resource":"module.acm.aws_acm_certificate.cert","attribute":["domain_name"]},{"resource":"module.key.aws_key_pair.server_key","attribute":["key_name"]},{"resource":"module.acm.aws_route53_record.cert_validation_record","attribute":[]},{"resource":"module.iam_role.aws_s3_bucket.vpc_flow_logs_bucket","attribute":["id"]},{"resource":"module.key.aws_key_pair.client_key","attribute":["key_name"]},{"resource":"data.terraform_remote_state.network","attribute":["outputs"]},{"resource":"module.acm.aws_acm_certificate.cert","attribute":["domain_validation_options"]},{"resource":"module.acm.aws_acm_certificate.cert","attribute":["status"]},{"resource":"module.key.aws_key_pair.nat-bastion","attribute":["key_name"]},{"resource":"module.iam_role.aws_iam_role.s3_ssm_CW_role","attribute":["name"]}],"timestamp":"2025-11-03T16:28:24Z","applyable":true,"complete":true,"errored":false}
